// Generated by CoffeeScript 1.3.3
(function(){var a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x;w=function(a,b){var c,d,e,f,g;return d=b/360*2*Math.PI,e=Math.sin(d),c=Math.cos(d),f=Math.pow(a+16,3)/1560896,g=f>.008856?f:a/903.3,function(b){var d,f,i,j,k,l,m,n;return n=h[b],i=n[0],j=n[1],k=n[2],m=(.99915*i+1.05122*j+1.1446*k)*g,l=.8633*k-.17266*j,f=.12949*k-.38848*i,d=(l*e+f*c)*g,function(b){return a*(m-1.05122*b)/(d+.17266*e*b)}}},x=function(a){var b,c;return b=Math.pow(a+16,3)/1560896,c=b>.008856?b:a/903.3,function(b){var d,e,f,g,i,j,k;return k=h[b],e=k[0],f=k[1],g=k[2],j=(.99915*e+1.05122*f+1.1446*g)*c,i=.8633*g-.17266*f,d=.12949*g-.38848*e,function(b,e){var f,g,h;return h=Math.sin(e),g=Math.cos(e),f=(i*h+d*g)*c,a*(j-1.05122*b)/(f+.17266*h*b)}}},v=function(a){var b,c,d;return b=(Math.pow(a,3)+48*Math.pow(a,2)+768*a+4096)/1560896,c=.008856,d=b>c?b:10*a/9033,function(a,b){var c,e,f,g,i,j,k;return k=h[a],f=k[0],g=k[1],i=k[2],j=-3015466475*i*d+603093295*g*d-603093295*b,c=1356959916*f*d-452319972*i*d,e=Math.atan2(j,c),b===0&&(e+=Math.PI),e}},j=function(a,b){var c,d,e,f,g,h,i,j,k,l,m,n;h=Infinity,f=w(a,b),m=["R","G","B"];for(i=0,k=m.length;i<k;i++){d=m[i],g=f(d),n=[0,1];for(j=0,l=n.length;j<l;j++)e=n[j],c=g(e),0<c&&c<h&&(h=c)}return h},k=function(a){var b,c,d,e,f,g,h,i,j,k,l,m,n,o;i=[],g=x(a),d=v(a),n=["R","G","B"];for(j=0,l=n.length;j<l;j++){c=n[j],h=g(c),o=[0,1];for(k=0,m=o.length;k<m;k++)f=o[k],e=d(c,f),b=h(f,e),i.push(b)}return Math.min.apply(Math,i)},h={R:[3.2406,-1.5372,-0.4986],G:[-0.9689,1.8758,.0415],B:[.0557,-0.204,1.057]},i={X:[.4124,.3576,.1805],Y:[.2126,.7152,.0722],Z:[.0193,.1192,.9505]},b=function(a,b){var c,d,e,f;d=0;for(c=e=0,f=a.length-1;0<=f?e<=f:e>=f;c=0<=f?++e:--e)d+=a[c]*b[c];return d},s=function(a,b){var c;return c=Math.pow(10,b),Math.round(a*c)/c},n=.95047,o=1,p=1.08883,l=.19784,m=.46834,f=.008856,g=903.3,c=function(a){return a>f?Math.pow(a,1/3):7.787*a+16/116},d=function(a){return Math.pow(a,3)>f?Math.pow(a,3):(116*a-16)/g},e=function(a){return a<=.0031308?12.92*a:1.055*Math.pow(a,1/2.4)-.055},u=function(a){var b;return b=.055,a>.04045?Math.pow((a+b)/(1+b),2.4):a/12.92},q=function(a){var b,c,d,e,f,g,h;a=function(){var b,d,e;e=[];for(b=0,d=a.length;b<d;b++)c=a[b],e.push(s(c,3));return e}();for(d=0,f=a.length;d<f;d++){b=a[d];if(b<-0.0001||b>1.0001)throw new Error("Illegal rgb value: "+b);b<0&&(b=0),b>1&&(b=1)}h=[];for(e=0,g=a.length;e<g;e++)b=a[e],h.push(Math.round(b*255));return h},a={xyz:{},luv:{},lch:{},husl:{},huslp:{},rgb:{},hex:{}},a.xyz.rgb=function(a){var c,d,f;return f=e(b(h.R,a)),d=e(b(h.G,a)),c=e(b(h.B,a)),[f,d,c]},a.rgb.xyz=function(a){var c,d,e,f,g,h,j;return e=a[0],d=a[1],c=a[2],j=[u(e),u(d),u(c)],f=b(i.X,j),g=b(i.Y,j),h=b(i.Z,j),[f,g,h]},a.xyz.luv=function(a){var b,d,e,f,g,h,i,j;return f=a[0],g=a[1],h=a[2],i=4*f/(f+15*g+3*h),j=9*g/(f+15*g+3*h),b=116*c(g/o)-16,b===0?[0,0,0]:(d=13*b*(i-l),e=13*b*(j-m),[b,d,e])},a.luv.xyz=function(a){var b,c,e,f,g,h,i,j,k;return b=a[0],c=a[1],e=a[2],b===0?[0,0,0]:(k=d((b+16)/116),i=c/(13*b)+l,j=e/(13*b)+m,g=k*o,f=0-9*g*i/((i-4)*j-i*j),h=(9*g-15*j*g-j*f)/(3*j),[f,g,h])},a.luv.lch=function(a){var b,c,d,e,f,g;return e=a[0],f=a[1],g=a[2],b=Math.pow(Math.pow(f,2)+Math.pow(g,2),.5),d=Math.atan2(g,f),c=d*360/2/Math.PI,c<0&&(c=360+c),[e,b,c]},a.lch.luv=function(a){var b,c,d,e,f,g;return e=a[0],b=a[1],c=a[2],d=c/360*2*Math.PI,f=Math.cos(d)*b,g=Math.sin(d)*b,[e,f,g]},a.husl.lch=function(a){var b,c,d,e,f;return c=a[0],e=a[1],d=a[2],d>99.9999999?[100,0,c]:d<1e-8?[0,0,c]:(f=j(d,c),b=f/100*e,[d,b,c])},a.lch.husl=function(a){var b,c,d,e,f;return d=a[0],b=a[1],c=a[2],d>99.9999999?[c,0,100]:d<1e-8?[c,0,0]:(f=j(d,c),e=b/f*100,[c,e,d])},a.huslp.lch=function(a){var b,c,d,e,f;return c=a[0],e=a[1],d=a[2],d>99.9999999?[100,0,c]:d<1e-8?[0,0,c]:(f=k(d),b=f/100*e,[d,b,c])},a.lch.huslp=function(a){var b,c,d,e,f;return d=a[0],b=a[1],c=a[2],d>99.9999999?[c,0,100]:d<1e-8?[c,0,0]:(f=k(d),e=b/f*100,[c,e,d])},a.rgb.hex=function(a){var b,c,d,e;c="#",a=q(a);for(d=0,e=a.length;d<e;d++)b=a[d],b=b.toString(16),b.length===1&&(b="0"+b),c+=b;return c},a.hex.rgb=function(a){var b,c,d;return a.charAt(0)==="#"&&(a=a.substring(1,7)),d=a.substring(0,2),c=a.substring(2,4),b=a.substring(4,6),[d,c,b].map(function(a){return parseInt(a,16)/255})},a.lch.rgb=function(b){return a.xyz.rgb(a.luv.xyz(a.lch.luv(b)))},a.rgb.lch=function(b){return a.luv.lch(a.xyz.luv(a.rgb.xyz(b)))},a.husl.rgb=function(b){return a.lch.rgb(a.husl.lch(b))},a.rgb.husl=function(b){return a.lch.husl(a.rgb.lch(b))},a.huslp.rgb=function(b){return a.lch.rgb(a.huslp.lch(b))},a.rgb.huslp=function(b){return a.lch.huslp(a.rgb.lch(b))},r={};try{t=require("stylus"),r=function(){return function(b){return b.define("husl",function(b,c,d,e){var f,g,h,i;return i=q(a.husl.rgb([b.val,c.val,d.val])),h=i[0],g=i[1],f=i[2],new t.nodes.RGBA(h,g,f,e!=null?e.val:1)}),b.define("huslp",function(b,c,d,e){var f,g,h,i;return i=q(a.huslp.rgb([b.val,c.val,d.val])),h=i[0],g=i[1],f=i[2],new t.nodes.RGBA(h,g,f,e!=null?e.val:1)})}}}catch(y){}r.fromRGB=function(b,c,d){return a.rgb.husl([b,c,d])},r.fromHex=function(b){return a.rgb.husl(a.hex.rgb(b))},r.toRGB=function(b,c,d){return a.husl.rgb([b,c,d])},r.toHex=function(b,c,d){return a.rgb.hex(a.husl.rgb([b,c,d]))},r.p={},r.p.toRGB=function(b,c,d){return a.xyz.rgb(a.luv.xyz(a.lch.luv(a.huslp.lch([b,c,d]))))},r.p.toHex=function(b,c,d){return a.rgb.hex(a.xyz.rgb(a.luv.xyz(a.lch.luv(a.huslp.lch([b,c,d])))))},r.p.fromRGB=function(b,c,d){return a.lch.huslp(a.luv.lch(a.xyz.luv(a.rgb.xyz([b,c,d]))))},r.p.fromHex=function(b){return a.lch.huslp(a.luv.lch(a.xyz.luv(a.rgb.xyz(a.hex.rgb(b)))))},r._conv=a,r._maxChroma=j,r._rgbPrepare=q,typeof module!="undefined"&&module!==null&&(module.exports=r),typeof jQuery!="undefined"&&jQuery!==null&&(jQuery.husl=r)}).call(this);